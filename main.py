import sys
from core.orchestrator import Orchestrator
from config import AppConfig

def main():
    """
    åº”ç”¨ç¨‹åºçš„ä¸»å…¥å£å‡½æ•°ã€‚
    """
    # 1. æ£€æŸ¥é…ç½®æ˜¯å¦æˆåŠŸåŠ è½½
    if not AppConfig:
        print("âŒ è‡´å‘½é”™è¯¯ï¼šæ— æ³•åŠ è½½é…ç½®ã€‚ç¨‹åºé€€å‡ºã€‚")
        sys.exit(1)

    # æ£€æŸ¥å¤§æ¨¡å‹é…ç½®
    if not AppConfig.check_config():
        sys.exit(1)

    # ==========================================================================
    # åœ¨æ­¤å®šä¹‰å¸Œæœ›ä»£ç†å®Œæˆçš„ä»»åŠ¡
    # ==========================================================================
    # ç¤ºä¾‹ä»»åŠ¡ 1ï¼šç®€å•æ–‡ä»¶æ“ä½œ
    # task = "åœ¨å·¥ä½œåŒºåˆ›å»ºä¸€ä¸ªåä¸º'hello.txt'çš„æ–‡ä»¶ï¼Œå†™å…¥'Hello, OpenManus-Lite!'"

    # ç¤ºä¾‹ä»»åŠ¡ 2ï¼šä½¿ç”¨Pythonå·¥å…·è¿›è¡Œè®¡ç®—
    task = "ä½¿ç”¨Pythonè®¡ç®—123ä¹˜ä»¥456çš„ç»“æœï¼Œå¹¶å°†æœ€ç»ˆç­”æ¡ˆå†™å…¥åä¸º'calculation_result.txt'çš„æ–‡ä»¶"
    # ==========================================================================

    # 2. åˆå§‹åŒ–å¹¶è¿è¡Œç¼–æ’å™¨
    print(f"ğŸš€ æ™ºèƒ½ä½“å¼€å§‹ä»»åŠ¡ï¼š{task}")
    orchestrator = Orchestrator(task=task)
    final_result = orchestrator.run()

    # 3. æ‰“å°æœ€ç»ˆç»“æœ
    print("\n\n" + "#"*20 + " ä»»åŠ¡æœ€ç»ˆç»“æœ " + "#"*20)
    print(final_result if final_result else "ä»»åŠ¡æœªè¿”å›æ˜ç¡®çš„æœ€ç»ˆç»“æœ")
    print("#"*58)


if __name__ == "__main__":
    main()